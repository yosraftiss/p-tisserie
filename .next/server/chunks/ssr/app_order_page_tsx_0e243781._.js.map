{"version":3,"sources":["../../../../app/order/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport { useCart } from \"@/components/cart-context\";\n\nexport default function OrderPage() {\n  const { items, total, clearCart } = useCart();\n  const [form, setForm] = useState({ name: \"\", phone: \"\", address: \"\" });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(\"\");\n    try {\n      // Générer le message WhatsApp\n      const message =\n        `Nouvelle commande Soltana\\n` +\n        `Nom: ${form.name}\\n` +\n        `Téléphone: ${form.phone}\\n` +\n        `Adresse: ${form.address}\\n` +\n        `---\\n` +\n        items.map((item) => `• ${item.name} x${item.quantity} - ${(item.price * item.quantity).toFixed(2)}dt`).join(\"\\n\") +\n        `\\nTotal: ${total.toFixed(2)}dt\\nPaiement: Sur place`;\n      clearCart();\n      // Redirection WhatsApp (format international pour la Tunisie)\n      window.location.href = `https://wa.me/21656170165?text=${encodeURIComponent(message)}`;\n    } catch (err: any) {\n      setError(\"Erreur lors de la préparation de la commande.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"pt-32 pb-16 px-4 max-w-md mx-auto\">\n      <h1 className=\"text-3xl font-bold text-navy mb-6 text-center\">Valider la commande</h1>\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <input name=\"name\" placeholder=\"Nom\" required className=\"w-full border p-2 rounded\" value={form.name} onChange={handleChange} />\n        <input name=\"phone\" placeholder=\"Téléphone\" required className=\"w-full border p-2 rounded\" value={form.phone} onChange={handleChange} />\n        <input name=\"address\" placeholder=\"Adresse\" required className=\"w-full border p-2 rounded\" value={form.address} onChange={handleChange} />\n        <button type=\"submit\" className=\"w-full bg-gold text-white py-2 rounded font-semibold hover:bg-gold/90 transition\" disabled={loading}>\n          {loading ? \"Préparation...\" : \"Valider et envoyer sur WhatsApp\"}\n        </button>\n        {error && <div className=\"text-red-500 text-sm mt-2\">{error}</div>}\n      </form>\n      <div className=\"mt-8\">\n        <h2 className=\"text-lg font-semibold mb-2\">Récapitulatif</h2>\n        <ul className=\"mb-2\">\n          {items.map((item) => (\n            <li key={item.id} className=\"flex justify-between text-sm mb-1\">\n              <span>{item.name} x{item.quantity}</span>\n              <span>{(item.price * item.quantity).toFixed(2)}dt</span>\n            </li>\n          ))}\n        </ul>\n        <div className=\"flex justify-between font-bold text-navy\">\n          <span>Total</span>\n          <span>{total.toFixed(2)}dt</span>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}